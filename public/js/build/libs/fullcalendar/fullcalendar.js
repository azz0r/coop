/*!
 * FullCalendar v2.0.0-beta2
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */

(function(e){typeof define=="function"&&define.amd?define(["jquery","moment"],e):e(jQuery,moment)})(function(e,t){function r(e,t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function i(e,t){var n=t.longDateFormat("L");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),e.isRTL?n+=" ddd":n="ddd "+n,n}function f(e){l(n,e)}function l(t){function n(n,r){e.isPlainObject(r)&&e.isPlainObject(t[n])&&!c(n)?t[n]=l({},t[n],r):r!==undefined&&(t[n]=r)}for(var r=1;r<arguments.length;r++)e.each(arguments[r],n);return t}function c(e){return/(Time|Duration)$/.test(e)}function h(r,i){function H(e){x?I()&&(V(),W(e)):B()}function B(){T=c.theme?"ui":"fc",r.addClass("fc"),c.isRTL?r.addClass("fc-rtl"):r.addClass("fc-ltr"),c.theme&&r.addClass("ui-widget"),x=e("<div class='fc-content' />").prependTo(r),E=new p(f,c),S=E.render(),S&&r.prepend(S),R(c.defaultView),c.handleWindowResize&&e(window).resize(J),q()||j()}function j(){setTimeout(function(){!N.start&&q()&&z()},0)}function F(){N&&(St("viewDestroy",N,N,N.element),N.triggerEventDestroy()),e(window).unbind("resize",J),E.destroy(),x.remove(),r.removeClass("fc fc-rtl ui-widget")}function I(){return r.is(":visible")}function q(){return e("body").is(":visible")}function R(e){(!N||e!=N.name)&&U(e)}function U(t){A++,N&&(St("viewDestroy",N,N,N.element),at(),N.triggerEventDestroy(),gt(),N.element.remove(),E.deactivateButton(N.name)),E.activateButton(t),N=new a[t](e("<div class='fc-view fc-view-"+t+"' />").appendTo(x),f),z(),yt(),A--}function z(e){(!N.start||e||!M.isWithin(N.intervalStart,N.intervalEnd))&&I()&&W(e)}function W(e){A++,N.start&&(St("viewDestroy",N,N,N.element),at(),Z()),gt(),e&&(M=N.incrementDate(M,e)),N.render(M.clone()),$(),yt(),(N.afterRender||P)(),st(),ot(),St("viewRender",N,N,N.element),A--,et()}function X(){I()&&(at(),Z(),V(),$(),G())}function V(){c.contentHeight?k=c.contentHeight:c.height?k=c.height-(S?S.height():0)-O(x):k=Math.round(x.width()/Math.max(c.aspectRatio,.5))}function $(){k===undefined&&V(),A++,N.setHeight(k),N.setWidth(x.width()),A--,C=r.outerWidth()}function J(){if(!A)if(N.start){var e=++L;setTimeout(function(){e==L&&!A&&I()&&C!=(C=r.outerWidth())&&(A++,X(),N.trigger("windowResize",w),A--)},200)}else j()}function K(){Z(),tt()}function Q(e){Z(),G(e)}function G(e){I()&&(N.renderEvents(_,e),N.trigger("eventAfterAllRender"))}function Z(){N.triggerEventDestroy(),N.clearEvents(),N.clearEventData()}function et(){!c.lazyFetching||g(N.start,N.end)?tt():G()}function tt(){b(N.start,N.end)}function rt(e){_=e,G()}function it(e){Q(e)}function st(){E.updateTitle(N.title)}function ot(){var e=f.getNow();e.isWithin(N.intervalStart,N.intervalEnd)?E.disableButton("today"):E.enableButton("today")}function ut(e,t){N.select(e,t)}function at(){N&&N.unselect()}function ft(){z(-1)}function lt(){z(1)}function ct(){M.add("years",-1),z()}function ht(){M.add("years",1),z()}function pt(){M=f.getNow(),z()}function dt(e){M=f.moment(e),z()}function vt(){M.add.apply(M,arguments),z()}function mt(){return M.clone()}function gt(){x.css({width:"100%",height:x.height(),overflow:"hidden"})}function yt(){x.css({width:"",height:"",overflow:""})}function bt(){return f}function wt(){return N}function Et(e,t){if(t===undefined)return c[e];if(e=="height"||e=="contentHeight"||e=="aspectRatio")c[e]=t,X()}function St(e,t){if(c[e])return c[e].apply(t||w,Array.prototype.slice.call(arguments,2))}var f=this;i=i||{};var c=l({},n,i),h;c.lang in s?h=s[c.lang]:h=s[n.lang],h&&(c=l({},n,h,i)),c.isRTL&&(c=l({},n,o,h||{},i)),f.options=c,f.render=H,f.destroy=F,f.refetchEvents=K,f.reportEvents=rt,f.reportEventChange=it,f.rerenderEvents=Q,f.changeView=R,f.select=ut,f.unselect=at,f.prev=ft,f.next=lt,f.prevYear=ct,f.nextYear=ht,f.today=pt,f.gotoDate=dt,f.incrementDate=vt,f.getDate=mt,f.getCalendar=bt,f.getView=wt,f.option=Et,f.trigger=St;var d=y(t.langData(c.lang));c.monthNames&&(d._months=c.monthNames),c.monthNamesShort&&(d._monthsShort=c.monthNamesShort),c.dayNames&&(d._weekdays=c.dayNames),c.dayNamesShort&&(d._weekdaysShort=c.dayNamesShort);if(c.firstDay){var v=y(d._week);v.dow=c.firstDay,d._week=v}f.defaultAllDayEventDuration=t.duration(c.defaultAllDayEventDuration),f.defaultTimedEventDuration=t.duration(c.defaultTimedEventDuration),f.moment=function(){var e;return c.timezone==="local"?e=u.moment.apply(null,arguments):c.timezone==="UTC"?e=u.moment.utc.apply(null,arguments):e=u.moment.parseZone.apply(null,arguments),e._lang=d,e},f.getIsAmbigTimezone=function(){return c.timezone!=="local"&&c.timezone!=="UTC"},f.rezoneDate=function(e){return f.moment(e.toArray())},f.getNow=function(){var e=c.now;return typeof e=="function"&&(e=e()),f.moment(e)},f.calculateWeekNumber=function(e){var t=c.weekNumberCalculation;if(typeof t=="function")return t(e);if(t==="local")return e.week();if(t.toUpperCase()==="ISO")return e.isoWeek()},f.getEventEnd=function(e){return e.end?e.end.clone():f.getDefaultEventEnd(e.allDay,e.start)},f.getDefaultEventEnd=function(e,t){var n=t.clone();return e?n.stripTime().add(f.defaultAllDayEventDuration):n.add(f.defaultTimedEventDuration),f.getIsAmbigTimezone()&&n.stripZone(),n},f.formatRange=function(e,t,n){return typeof n=="function"&&(n=n.call(f,c,d)),nt(e,t,n,null,c.isRTL)},f.formatDate=function(e,t){return typeof t=="function"&&(t=t.call(f,c,d)),Y(e,t)},m.call(f,c);var g=f.isFetchNeeded,b=f.fetchEvents,w=r[0],E,S,x,T,N,C,k,L=0,A=0,M,_=[],D;c.defaultDate!=null?M=f.moment(c.defaultDate):M=f.getNow(),c.droppable&&e(document).bind("dragstart",function(t,n){var r=t.target,i=e(r);if(!i.parents(".fc").length){var s=c.dropAccept;if(e.isFunction(s)?s.call(r,i):i.is(s))D=r,N.dragStart(D,t,n)}}).bind("dragstop",function(e,t){D&&(N.dragStop(D,e,t),D=null)})}function p(t,n){function o(){s=n.theme?"ui":"fc";var t=n.header;if(t)return i=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(f("left")).append(f("center")).append(f("right"))),i}function u(){i.remove()}function f(r){var i=e("<td class='fc-header-"+r+"'/>"),o=n.header[r];return o&&e.each(o.split(" "),function(r){r>0&&i.append("<span class='fc-header-space'/>");var o;e.each(this.split(","),function(r,u){if(u=="title")i.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(s+"-corner-right"),o=null;else{var f;t[u]?f=t[u]:a[u]&&(f=function(){d.removeClass(s+"-state-hover"),t.changeView(u)});if(f){var l=j(n.themeButtonIcons,u),c=j(n.buttonIcons,u),h=j(n.buttonText,u),p;l&&n.theme?p="<span class='ui-icon ui-icon-"+l+"'></span>":c&&!n.theme?p="<span class='fc-icon fc-icon-"+c+"'></span>":p=F(h||u);var d=e("<span class='fc-button fc-button-"+u+" "+s+"-state-default'>"+p+"</span>").click(function(){d.hasClass(s+"-state-disabled")||f()}).mousedown(function(){d.not("."+s+"-state-active").not("."+s+"-state-disabled").addClass(s+"-state-down")}).mouseup(function(){d.removeClass(s+"-state-down")}).hover(function(){d.not("."+s+"-state-active").not("."+s+"-state-disabled").addClass(s+"-state-hover")},function(){d.removeClass(s+"-state-hover").removeClass(s+"-state-down")}).appendTo(i);q(d),o||d.addClass(s+"-corner-left"),o=d}}}),o&&o.addClass(s+"-corner-right")}),i}function l(e){i.find("h2").html(e)}function c(e){i.find("span.fc-button-"+e).addClass(s+"-state-active")}function h(e){i.find("span.fc-button-"+e).removeClass(s+"-state-active")}function p(e){i.find("span.fc-button-"+e).addClass(s+"-state-disabled")}function d(e){i.find("span.fc-button-"+e).removeClass(s+"-state-disabled")}var r=this;r.render=o,r.destroy=u,r.updateTitle=l,r.activateButton=c,r.deactivateButton=h,r.disableButton=p,r.enableButton=d;var i=e([]),s}function m(t){function S(e,t){return!l||e.clone().stripZone()<l.clone().stripZone()||t.clone().stripZone()>c.clone().stripZone()}function x(e,t){l=e,c=t,y=[];var n=++h,r=f.length;p=r;for(var i=0;i<r;i++)T(f[i],n)}function T(e,t){N(e,function(n){if(t==h){if(n)for(var r=0;r<n.length;r++){var i=j(n[r],e);i&&y.push(i)}p--,p||s(y)}})}function N(r,i){var s,o=u.sourceFetchers,a;for(s=0;s<o.length;s++){a=o[s].call(n,r,l.clone(),c.clone(),t.timezone,i);if(a===!0)return;if(typeof a=="object"){N(a,i);return}}var f=r.events;if(f)e.isFunction(f)?(H(),f.call(n,l.clone(),c.clone(),t.timezone,function(e){i(e),B()})):e.isArray(f)?i(f):i();else{var h=r.url;if(h){var p=r.success,v=r.error,m=r.complete,g;e.isFunction(r.data)?g=r.data():g=r.data;var y=e.extend({},g||{}),b=W(r.startParam,t.startParam),w=W(r.endParam,t.endParam),E=W(r.timezoneParam,t.timezoneParam);b&&(y[b]=l.format()),w&&(y[w]=c.format()),t.timezone&&t.timezone!="local"&&(y[E]=t.timezone),H(),e.ajax(e.extend({},d,r,{data:y,success:function(t){t=t||[];var n=z(p,this,arguments);e.isArray(n)&&(t=n),i(t)},error:function(){z(v,this,arguments),i()},complete:function(){z(m,this,arguments),B()}}))}else i()}}function C(e){e=k(e),e&&(p++,T(e,h))}function k(t){e.isFunction(t)||e.isArray(t)?t={events:t}:typeof t=="string"&&(t={url:t});if(typeof t=="object")return q(t),f.push(t),t}function L(t){f=e.grep(f,function(e){return!R(e,t)}),y=e.grep(y,function(e){return!R(e.source,t)}),s(y)}function A(e){F(e),M(e),s(y)}function M(e){var t,n,r,i;for(t=0;t<y.length;t++){n=y[t];if(n._id==e._id&&n!==e)for(r=0;r<O.length;r++)i=O[r],e[i]!==undefined&&(n[i]=e[i])}}function _(e,t){var n=j(e);n&&(n.source||(t&&(a.events.push(n),n.source=a),y.push(n)),s(y))}function D(t){var n;if(!t){y=[];for(n=0;n<f.length;n++)e.isArray(f[n].events)&&(f[n].events=[])}else{if(!e.isFunction(t)){var r=t+"";t=function(e){return e._id==r}}y=e.grep(y,t,!0);for(n=0;n<f.length;n++)e.isArray(f[n].events)&&(f[n].events=e.grep(f[n].events,t,!0))}s(y)}function P(t){return e.isFunction(t)?e.grep(y,t):t?(t+="",e.grep(y,function(e){return e._id==t})):y}function H(){m++||r("loading",null,!0,i())}function B(){--m||r("loading",null,!1,i())}function j(r,i){var s={},u,a,f,l;t.eventDataTransform&&(r=t.eventDataTransform(r)),i&&i.eventDataTransform&&(r=i.eventDataTransform(r)),u=n.moment(r.start||r.date);if(!u.isValid())return;a=null;if(r.end){a=n.moment(r.end);if(!a.isValid())return}return f=r.allDay,f===undefined&&(l=W(i?i.allDayDefault:undefined,t.allDayDefault),l!==undefined?f=l:f=!u.hasTime()&&(!a||!a.hasTime())),f?(u.hasTime()&&u.stripTime(),a&&a.hasTime()&&a.stripTime()):(u.hasTime()||(u=n.rezoneDate(u)),a&&!a.hasTime()&&(a=n.rezoneDate(a))),e.extend(s,r),i&&(s.source=i),s._id=r._id||(r.id===undefined?"_fc"+v++:r.id+""),r.className?typeof r.className=="string"?s.className=r.className.split(/\s+/):s.className=r.className:s.className=[],s.allDay=f,s.start=u,s.end=a,t.forceEventDuration&&!s.end&&(s.end=o(s)),g(s),s}function F(e,t,r){var i=e._allDay,s=e._start,o=e._end,u=!1,a,f,l;return!t&&!r&&(t=e.start,r=e.end),e.allDay!=i?a=e.allDay:a=!(t||r).hasTime(),a&&(t&&(t=t.clone().stripTime()),r&&(r=r.clone().stripTime())),t&&(a?f=E(t,s.clone().stripTime()):f=E(t,s)),a!=i?u=!0:r&&(l=E(r||n.getDefaultEventEnd(a,t||s),t||s).subtract(E(o||n.getDefaultEventEnd(i,s),s))),I(P(e._id),u,a,f,l)}function I(r,i,s,o,u){var a=n.getIsAmbigTimezone(),f=[];return e.each(r,function(e,r){var l=r._allDay,c=r._start,h=r._end,p=s!=null?s:l,d=c.clone(),v=!i&&h?h.clone():null;p?(d.stripTime(),v&&v.stripTime()):(d.hasTime()||(d=n.rezoneDate(d)),v&&!v.hasTime()&&(v=n.rezoneDate(v))),!v&&(t.forceEventDuration||+u)&&(v=n.getDefaultEventEnd(p,d)),d.add(o),v&&v.add(o).add(u),a&&(+o&&d.stripZone(),v&&(+o||+u)&&v.stripZone()),r.allDay=p,r.start=d,r.end=v,g(r),f.push(function(){r.allDay=l,r.start=c,r.end=h,g(r)})}),function(){for(var e=0;e<f.length;e++)f[e]()}}function q(e){e.className?typeof e.className=="string"&&(e.className=e.className.split(/\s+/)):e.className=[];var t=u.sourceNormalizers;for(var r=0;r<t.length;r++)t[r].call(n,e)}function R(e,t){return e&&t&&U(e)==U(t)}function U(e){return(typeof e=="object"?e.events||e.url:"")||e}var n=this;n.isFetchNeeded=S,n.fetchEvents=x,n.addEventSource=C,n.removeEventSource=L,n.updateEvent=A,n.renderEvent=_,n.removeEvents=D,n.clientEvents=P,n.mutateEvent=F;var r=n.trigger,i=n.getView,s=n.reportEvents,o=n.getEventEnd,a={events:[]},f=[a],l,c,h=0,p=0,m=0,y=[],b=t.eventSources||[];t.events&&b.push(t.events);for(var w=0;w<b.length;w++)k(b[w]);var O=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"]}function g(e){e._allDay=e.allDay,e._start=e.start.clone(),e._end=e.end?e.end.clone():null}function y(e){var t=function(){};return t.prototype=e,new t}function b(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function E(e,n){return t.duration({days:e.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:e.time()-n.time()})}function S(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function x(t,n,r){t.unbind("mouseover").mouseover(function(t){var i=t.target,s,o,u;while(i!=this)s=i,i=i.parentNode;(o=s._fci)!==undefined&&(s._fci=undefined,u=n[o],r(u.event,u.element,u),e(t.target).trigger(t)),t.stopPropagation()})}function T(t,n,r){for(var i=0,s;i<t.length;i++)s=e(t[i]),s.width(Math.max(0,n-C(s,r)))}function N(t,n,r){for(var i=0,s;i<t.length;i++)s=e(t[i]),s.height(Math.max(0,n-O(s,r)))}function C(e,t){return k(e)+A(e)+(t?L(e):0)}function k(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function L(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function A(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function O(e,t){return M(e)+D(e)+(t?_(e):0)}function M(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function _(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function D(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function P(){}function H(e,t){return e-t}function B(e){return Math.max.apply(Math,e)}function j(e,t){if(e[t]!==undefined)return e[t];var n=t.split(/(?=[A-Z])/),r=n.length-1,i;for(;r>=0;r--){i=e[n[r].toLowerCase()];if(i!==undefined)return i}return e["default"]}function F(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function I(e){return e.replace(/&.*?;/g,"")}function q(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function R(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function U(e,t){var n=e.source||{},r=e.color,i=n.color,s=t("eventColor"),o=e.backgroundColor||r||n.backgroundColor||i||t("eventBackgroundColor")||s,u=e.borderColor||r||n.borderColor||i||t("eventBorderColor")||s,a=e.textColor||n.textColor||t("eventTextColor"),f=[];return o&&f.push("background-color:"+o),u&&f.push("border-color:"+u),a&&f.push("color:"+a),f.join(";")}function z(t,n,r){e.isFunction(t)&&(t=[t]);if(t){var i,s;for(i=0;i<t.length;i++)s=t[i].apply(n,r)||s;return s}}function W(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e]}function $(n,r,i){var s=n[0],o=n.length==1&&typeof s=="string",u=!1,a=!1,f,l;if(o){if(X.test(s))s+="-01",u=!0,a=!0;else if(f=V.exec(s))u=!f[5],a=!0}else e.isArray(s)&&(a=!0);return r||i||u?l=t.utc.apply(t,n):l=t.apply(null,n),t.isMoment(s)&&K(s,l),u&&(l._ambigTime=!0,l._ambigZone=!0),i&&(a?l._ambigZone=!0:o?l.zone(s):(S(s)||s===undefined)&&l.local()),new J(l)}function J(e){b(this,e)}function K(e,t){e._ambigTime?t._ambigTime=!0:t._ambigTime&&delete t._ambigTime,e._ambigZone?t._ambigZone=!0:t._ambigZone&&delete t._ambigZone}function Q(e){var t=[],n=!1,r=!1,i;for(i=0;i<e.length;i++)t.push(u.moment(e[i])),n=n||t[i]._ambigTime,r=r||t[i]._ambigZone;for(i=0;i<t.length;i++)n?t[i].stripTime():r&&t[i].stripZone();return t}function G(e,n){return t.fn.format.call(e,n)}function Y(e,t){return Z(e,ut(t))}function Z(e,t){var n="",r;for(r=0;r<t.length;r++)n+=tt(e,t[r]);return n}function tt(e,t){var n,r;if(typeof t=="string")return t;if(n=t.token)return et[n]?et[n](e):G(e,n);if(t.maybe){r=Z(e,t.maybe);if(r.match(/[1-9]/))return r}return""}function nt(e,t,n,r,i){return n=e.lang().longDateFormat(n)||n,r=r||" - ",rt(e,t,ut(n),r,i)}function rt(e,t,n,r,i){var s,o,u="",a,f="",l,c="",h="",p="";for(o=0;o<n.length;o++){s=st(e,t,n[o]);if(s===!1)break;u+=s}for(a=n.length-1;a>o;a--){s=st(e,t,n[a]);if(s===!1)break;f=s+f}for(l=o;l<=a;l++)c+=tt(e,n[l]),h+=tt(t,n[l]);if(c||h)i?p=h+r+c:p=c+r+h;return u+p+f}function st(e,t,n){var r,i;if(typeof n=="string")return n;if(r=n.token){i=it[r.charAt(0)];if(i&&e.isSame(t,i))return G(e,r)}return!1}function ut(e){return e in ot?ot[e]:ot[e]=at(e)}function at(e){var t=[],n=/\[([^\]]*)\]|\(([^\)]*)\)|((\w)\4*o?T?)|([^\w\[\(]+)/g,r;while(r=n.exec(e))r[1]?t.push(r[1]):r[2]?t.push({maybe:at(r[2])}):r[3]?t.push({token:r[3]}):r[5]&&t.push(r[5]);return t}function ft(e,t){function r(e,t){return e.clone().stripTime().add("months",t).startOf("month")}function i(e){n.intervalStart=e.clone().stripTime().startOf("month"),n.intervalEnd=n.intervalStart.clone().add("months",1),n.start=n.intervalStart.clone().startOf("week"),n.start=n.skipHiddenDays(n.start),n.end=n.intervalEnd.clone().add("days",(7-n.intervalEnd.weekday())%7),n.end=n.skipHiddenDays(n.end,-1,!0);var r=Math.ceil(n.end.diff(n.start,"weeks",!0));n.opt("weekMode")=="fixed"&&(n.end.add("weeks",6-r),r=6),n.title=t.formatDate(n.intervalStart,n.opt("titleFormat")),n.renderBasic(r,n.getCellsPerWeek(),!0)}var n=this;n.incrementDate=r,n.render=i,ht.call(n,e,t,"month")}function lt(e,t){function r(e,t){return e.clone().stripTime().add("weeks",t).startOf("week")}function i(e){n.intervalStart=e.clone().stripTime().startOf("week"),n.intervalEnd=n.intervalStart.clone().add("weeks",1),n.start=n.skipHiddenDays(n.intervalStart),n.end=n.skipHiddenDays(n.intervalEnd,-1,!0),n.title=t.formatRange(n.start,n.end.clone().subtract(1),n.opt("titleFormat")," — "),n.renderBasic(1,n.getCellsPerWeek(),!1)}var n=this;n.incrementDate=r,n.render=i,ht.call(n,e,t,"basicWeek")}function ct(e,t){function r(e,t){var r=e.clone().stripTime().add("days",t);return r=n.skipHiddenDays(r,t<0?-1:1),r}function i(e){n.start=n.intervalStart=e.clone().stripTime(),n.end=n.intervalEnd=n.start.clone().add("days",1),n.title=t.formatDate(n.start,n.opt("titleFormat")),n.renderBasic(1,1,!1)}var n=this;n.incrementDate=r,n.render=i,ht.call(n,e,t,"basicDay")}function ht(t,n,r){function X(e,t,n){_=e,D=t,P=n,V(),y||$(),J()}function V(){U=s("theme")?"ui":"fc",z=s("columnFormat"),W=s("weekNumbers")}function $(){C=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function J(){var n=K();v&&v.remove(),v=e(n).appendTo(t),m=v.find("thead"),g=m.find(".fc-day-header"),y=v.find("tbody"),b=y.find("tr"),E=y.find(".fc-day"),S=b.find("td:first-child"),x=b.eq(0).find(".fc-day > div"),N=b.eq(0).find(".fc-day-content > div"),R(m.add(m.find("tr"))),R(b),b.eq(0).addClass("fc-first"),b.filter(":last").addClass("fc-last"),E.each(function(t,n){var r=l(Math.floor(t/D),t%D);o("dayRender",i,r,e(n))}),tt(E)}function K(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+Q()+G()+"</table>";return e}function Q(){var e=U+"-widget-header",t="",n,r;t+="<thead><tr>",W&&(t+="<th class='fc-week-number "+e+"'>"+F(s("weekNumberTitle"))+"</th>");for(n=0;n<D;n++)r=l(0,n),t+="<th class='fc-day-header fc-"+w[r.day()]+" "+e+"'>"+F(p(r,z))+"</th>";return t+="</tr></thead>",t}function G(){var e=U+"-widget-content",t="",n,r,i;t+="<tbody>";for(n=0;n<_;n++){t+="<tr class='fc-week'>",W&&(i=l(n,0),t+="<td class='fc-week-number "+e+"'>"+"<div>"+F(d(i))+"</div>"+"</td>");for(r=0;r<D;r++)i=l(n,r),t+=Y(i);t+="</tr>"}return t+="</tbody>",t}function Y(e){var t=i.intervalStart.month(),r=n.getNow().stripTime(),s="",o=U+"-widget-content",u=["fc-day","fc-"+w[e.day()],o];return e.month()!=t&&u.push("fc-other-month"),e.isSame(r,"day")?u.push("fc-today",U+"-state-highlight"):e<r?u.push("fc-past"):u.push("fc-future"),s+="<td class='"+u.join(" ")+"'"+" data-date='"+e.format()+"'"+">"+"<div>",P&&(s+="<div class='fc-day-number'>"+e.date()+"</div>"),s+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",s}function Z(t){L=t;var n=Math.max(L-m.height(),0),r,i,o;s("weekMode")=="variable"?r=i=Math.floor(n/(_==1?2:6)):(r=Math.floor(n/_),i=n-r*(_-1)),S.each(function(t,n){t<_&&(o=e(n),o.find("> div").css("min-height",(t==_-1?i:r)-O(o)))})}function et(e){k=e,j.clear(),I.clear(),M=0,W&&(M=m.find("th.fc-week-number").outerWidth()),A=Math.floor((k-M)/D),T(g.slice(0,-1),A)}function tt(e){e.click(nt).mousedown(f)}function nt(t){if(!s("selectable")){var r=n.moment(e(this).data("date"));o("dayClick",this,r,t)}}function rt(e,t,n){n&&H.build();var r=h(e,t);for(var i=0;i<r.length;i++){var s=r[i];tt(it(s.row,s.leftCol,s.row,s.rightCol))}}function it(e,n,r,i){var s=H.rect(e,n,r,i,t);return u(s,t)}function st(e){return e.clone().stripTime().add("days",1)}function ot(e,t){rt(e,t,!0)}function ut(){a()}function at(e,t){var n=c(e),r=E[n.row*D+n.col];o("dayClick",r,e,t)}function ft(e,t,r){B.start(function(e){a();if(e){var t=l(e),r=t.clone().add(n.defaultAllDayEventDuration);rt(t,r)}},t)}function lt(e,t,n){var r=B.stop();a(),r&&o("drop",e,l(r),t,n)}function ct(e){return j.left(e)}function ht(e){return j.right(e)}function dt(e){return I.left(e)}function vt(e){return I.right(e)}function mt(e){return b.eq(e)}var i=this;i.renderBasic=X,i.setHeight=Z,i.setWidth=et,i.renderDayOverlay=rt,i.defaultSelectionEnd=st,i.renderSelection=ot,i.clearSelection=ut,i.reportDayClick=at,i.dragStart=ft,i.dragStop=lt,i.getHoverListener=function(){return B},i.colLeft=ct,i.colRight=ht,i.colContentLeft=dt,i.colContentRight=vt,i.getIsCellAllDay=function(){return!0},i.allDayRow=mt,i.getRowCnt=function(){return _},i.getColCnt=function(){return D},i.getColWidth=function(){return A},i.getDaySegmentContainer=function(){return C},Ot.call(i,t,n,r),Bt.call(i),Ht.call(i),pt.call(i);var s=i.opt,o=i.trigger,u=i.renderOverlay,a=i.clearOverlays,f=i.daySelectionMousedown,l=i.cellToDate,c=i.dateToCell,h=i.rangeToSegments,p=n.formatDate,d=n.calculateWeekNumber,v,m,g,y,b,E,S,x,N,C,k,L,A,M,_,D,P,H,B,j,I,U,z,W;q(t.addClass("fc-grid")),H=new jt(function(t,n){var r,i,s;g.each(function(t,o){r=e(o),i=r.offset().left,t&&(s[1]=i),s=[i],n[t]=s}),s[1]=i+r.outerWidth(),b.each(function(n,o){n<_&&(r=e(o),i=r.offset().top,n&&(s[1]=i),s=[i],t[n]=s)}),s[1]=i+r.outerHeight()}),B=new Ft(H),j=new qt(function(e){return x.eq(e)}),I=new qt(function(e){return N.eq(e)})}function pt(){function t(t,n){e.renderDayEvents(t,n)}function n(){e.getDaySegmentContainer().empty()}var e=this;e.renderEvents=t,e.clearEvents=n,Mt.call(e)}function dt(e,t){function r(e,t){return e.clone().stripTime().add("weeks",t).startOf("week")}function i(e){n.intervalStart=e.clone().stripTime().startOf("week"),n.intervalEnd=n.intervalStart.clone().add("weeks",1),n.start=n.skipHiddenDays(n.intervalStart),n.end=n.skipHiddenDays(n.intervalEnd,-1,!0),n.title=t.formatRange(n.start,n.end.clone().subtract(1),n.opt("titleFormat")," — "),n.renderAgenda(n.getCellsPerWeek())}var n=this;n.incrementDate=r,n.render=i,yt.call(n,e,t,"agendaWeek")}function vt(e,t){function r(e,t){var r=e.clone().stripTime().add("days",t);return r=n.skipHiddenDays(r,t<0?-1:1),r}function i(e){n.start=n.intervalStart=e.clone().stripTime(),n.end=n.intervalEnd=n.start.clone().add("days",1),n.title=t.formatDate(n.start,n.opt("titleFormat")),n.renderAgenda(1)}var n=this;n.incrementDate=r,n.render=i,yt.call(n,e,t,"agendaDay")}function mt(e,t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function gt(e,t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}function yt(n,r,i){function pt(e){tt=e,dt(),b?mt():vt()}function dt(){at=o("theme")?"ui":"fc",ft=o("isRTL"),ht=o("columnFormat"),lt=t.duration(o("minTime")),ct=t.duration(o("maxTime")),Q=t.duration(o("slotDuration")),Y=o("snapDuration"),Y=Y?t.duration(Y):Q}function vt(){var r,i=at+"-widget-header",u=at+"-widget-content",a,f,l,c=Q.asMinutes()%15===0;mt(),_=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),o("allDaySlot")?(D=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(_),r="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+i+" fc-agenda-axis'>"+(o("allDayHTML")||F(o("allDayText")))+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+i+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",P=e(r).appendTo(_),B=P.find("tr"),Nt(B.find("td")),_.append("<div class='fc-agenda-divider "+i+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):D=e([]),j=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(_),I=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(j),U=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(I),r="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=t.duration(+lt),nt=0;while(a<ct)f=s.start.clone().time(a),l=f.minutes(),r+="<tr class='fc-slot"+nt+" "+(l?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+i+"'>"+(!c||!l?F(g(f,o("axisFormat"))):"&nbsp;")+"</th>"+"<td class='"+u+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",a.add(Q),nt++;r+="</tbody></table>",z=e(r).appendTo(I),Ct(z.find("td"))}function mt(){var t=gt();b&&b.remove(),b=e(t).appendTo(n),E=b.find("thead"),S=E.find("th").slice(1,-1),x=b.find("tbody"),C=x.find("td").slice(0,-1),k=C.find("> div"),L=C.find(".fc-day-content > div"),A=C.eq(0),M=k.eq(0),R(E.add(E.find("tr"))),R(x.add(x.find("tr")))}function gt(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+yt()+wt()+"</table>";return e}function yt(){var e=at+"-widget-header",t,n="",r,i;n+="<thead><tr>",o("weekNumbers")?(t=d(0,0),r=y(t),ft?r+=o("weekNumberTitle"):r=o("weekNumberTitle")+r,n+="<th class='fc-agenda-axis fc-week-number "+e+"'>"+F(r)+"</th>"):n+="<th class='fc-agenda-axis "+e+"'>&nbsp;</th>";for(i=0;i<tt;i++)t=d(0,i),n+="<th class='fc-"+w[t.day()]+" fc-col"+i+" "+e+"'>"+F(g(t,ht))+"</th>";return n+="<th class='fc-agenda-gutter "+e+"'>&nbsp;</th>"+"</tr>"+"</thead>",n}function wt(){var e=at+"-widget-header",t=at+"-widget-content",n,i=r.getNow().stripTime(),s,o,u,a,f="";f+="<tbody><tr><th class='fc-agenda-axis "+e+"'>&nbsp;</th>",o="";for(s=0;s<tt;s++)n=d(0,s),a=["fc-col"+s,"fc-"+w[n.day()],t],n.isSame(i,"day")?a.push(at+"-state-highlight","fc-today"):n<i?a.push("fc-past"):a.push("fc-future"),u="<td class='"+a.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",o+=u;return f+=o,f+="<td class='fc-agenda-gutter "+t+"'>&nbsp;</td>"+"</tr>"+"</tbody>",f}function Et(e){e===undefined&&(e=V),V=e,ut={};var t=x.position().top,n=j.position().top,r=Math.min(e-t,z.height()+n+1);M.height(r-O(A)),_.css("top",t),j.height(r-n-1);var i=z.find("tr:first").height()+1,s=z.find("tr:eq(1)").height();G=(i+s)/2,Z=Q/Y,et=G/Z}function St(t){X=t,st.clear(),ot.clear();var n=E.find("th:first");P&&(n=n.add(P.find("th:first"))),n=n.add(z.find("th:first")),$=0,T(n.width("").each(function(t,n){$=Math.max($,e(n).outerWidth())}),$);var r=b.find(".fc-agenda-gutter");P&&(r=r.add(P.find("th.fc-agenda-gutter")));var i=j[0].clientWidth;K=j.width()-i,K?(T(r,K),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),J=Math.floor((i-$)/tt),T(S.slice(0,-1),J)}function xt(){function n(){j.scrollTop(e)}var e=Wt(t.duration(o("scrollTime")))+1;n(),setTimeout(n,0)}function Tt(){xt()}function Nt(e){e.click(kt).mousedown(h)}function Ct(e){e.click(kt).mousedown(Kt)}function kt(e){if(!o("selectable")){var t=Math.min(tt-1,Math.floor((e.pageX-b.offset().left-$)/J)),n=d(0,t),i=this.parentNode.className.match(/fc-slot(\d+)/);if(i){var s=parseInt(i[1]);n.add(lt+s*Q),n=r.rezoneDate(n),u("dayClick",C[t],n,e)}else u("dayClick",C[t],n,e)}}function Lt(e,t,n){n&&rt.build();var r=m(e,t);for(var i=0;i<r.length;i++){var s=r[i];Nt(At(s.row,s.leftCol,s.row,s.rightCol))}}function At(e,t,n,r){var i=rt.rect(e,t,n,r,_);return a(i,_)}function Mt(e,t){e=e.clone().stripZone(),t=t.clone().stripZone();for(var n=0;n<tt;n++){var r=d(0,n),i=r.clone().add("days",1),s=r<e?e:r,o=i<t?i:t;if(s<o){var u=rt.rect(0,n,0,n,I),f=zt(s,r),l=zt(o,r);u.top=f,u.height=l-f,Ct(a(u,I))}}}function _t(e){return st.left(e)}function Dt(e){return ot.left(e)}function Pt(e){return st.right(e)}function It(e){return ot.right(e)}function Rt(e){return o("allDaySlot")&&!e.row}function Ut(e){var n=d(0,e.col),i=e.row;return o("allDaySlot")&&i--,i>=0&&(n.time(t.duration(lt+i*Q)),n=r.rezoneDate(n)),n}function zt(e,n){return Wt(t.duration(e.clone().stripZone()-n.clone().stripTime()))}function Wt(e){if(e<lt)return 0;if(e>=ct)return z.height();var t=(e-lt)/Q,n=Math.floor(t),r=t-n,i=ut[n];i===undefined&&(i=ut[n]=z.find("tr").eq(n).find("td div")[0].offsetTop);var s=i-1+r*G;return s=Math.max(s,0),s}function Xt(e){return e.hasTime()?e.clone().add(Q):e.clone().add("days",1)}function Vt(e,t){e.hasTime()||t.hasTime()?$t(e,t):o("allDaySlot")&&Lt(e,t,!0)}function $t(t,n){var r=o("selectHelper");rt.build();if(r){var i=v(t).col;if(i>=0&&i<tt){var s=rt.rect(0,i,0,i,I),u=zt(t,t),a=zt(n,t);if(a>u){s.top=u,s.height=a-u,s.left+=2,s.width-=5;if(e.isFunction(r)){var f=r(t,n);f&&(s.position="absolute",W=e(f).css(s).appendTo(I))}else s.isStart=!0,s.isEnd=!0,W=e(p({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},s)),W.css("opacity",o("dragOpacity"));W&&(Ct(W),I.append(W),T(W,s.width,!0),N(W,s.height,!0))}}}else Mt(t,n)}function Jt(){f(),W&&(W.remove(),W=null)}function Kt(t){if(t.which==1&&o("selectable")){c(t);var n;it.start(function(e,t){Jt();if(e&&e.col==t.col&&!Rt(e)){var r=Ut(t),i=Ut(e);n=[r,r.clone().add(Y),i,i.clone().add(Y)].sort(H),$t(n[0],n[3])}else n=null},t),e(document).one("mouseup",function(e){it.stop(),n&&(+n[0]==+n[1]&&Qt(n[0],e),l(n[0],n[3],e))})}}function Qt(e,t){u("dayClick",C[v(e).col],e,t)}function Gt(e,t,n){it.start(function(e){f();if(e){var t=Ut(e),n=t.clone();t.hasTime()?(n.add(r.defaultTimedEventDuration),Mt(t,n)):(n.add(r.defaultAllDayEventDuration),Lt(t,n))}},t)}function Yt(e,t,n){var r=it.stop();f(),r&&u("drop",e,Ut(r),t,n)}var s=this;s.renderAgenda=pt,s.setWidth=St,s.setHeight=Et,s.afterRender=Tt,s.computeDateTop=zt,s.getIsCellAllDay=Rt,s.allDayRow=function(){return B},s.getCoordinateGrid=function(){return rt},s.getHoverListener=function(){return it},s.colLeft=_t,s.colRight=Pt,s.colContentLeft=Dt,s.colContentRight=It,s.getDaySegmentContainer=function(){return D},s.getSlotSegmentContainer=function(){return U},s.getSlotContainer=function(){return I},s.getRowCnt=function(){return 1},s.getColCnt=function(){return tt},s.getColWidth=function(){return J},s.getSnapHeight=function(){return et},s.getSnapDuration=function(){return Y},s.getSlotHeight=function(){return G},s.getSlotDuration=function(){return Q},s.getMinTime=function(){return lt},s.getMaxTime=function(){return ct},s.defaultSelectionEnd=Xt,s.renderDayOverlay=Lt,s.renderSelection=Vt,s.clearSelection=Jt,s.reportDayClick=Qt,s.dragStart=Gt,s.dragStop=Yt,Ot.call(s,n,r,i),Bt.call(s),Ht.call(s),bt.call(s);var o=s.opt,u=s.trigger,a=s.renderOverlay,f=s.clearOverlays,l=s.reportSelection,c=s.unselect,h=s.daySelectionMousedown,p=s.slotSegHtml,d=s.cellToDate,v=s.dateToCell,m=s.rangeToSegments,g=r.formatDate,y=r.calculateWeekNumber,b,E,S,x,C,k,L,A,M,_,D,P,B,j,I,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut={},at,ft,lt,ct,ht;q(n.addClass("fc-agenda")),rt=new jt(function(t,n){function l(e){return Math.max(a,Math.min(f,e))}var r,i,s;S.each(function(t,o){r=e(o),i=r.offset().left,t&&(s[1]=i),s=[i],n[t]=s}),s[1]=i+r.outerWidth(),o("allDaySlot")&&(r=B,i=r.offset().top,t[0]=[i,i+r.outerHeight()]);var u=I.offset().top,a=j.offset().top,f=a+j.outerHeight();for(var c=0;c<nt*Z;c++)t.push([l(u+et*c),l(u+et*(c+1))])}),it=new Ft(rt),st=new qt(function(e){return k.eq(e)}),ot=new qt(function(e){return L.eq(e)})}function bt(){function W(e,t){var n,i=e.length,s=[],o=[];for(n=0;n<i;n++)e[n].allDay?s.push(e[n]):o.push(e[n]);r("allDaySlot")&&(H(s,t),a()),J(V(o),t)}function X(){f().empty(),l().empty()}function V(e){var t=g(),n=B(),r=j(),i,s,o,u,a,f=[];for(s=0;s<t;s++){i=m(0,s),a=$(e,i.clone().time(n),i.clone().time(r)),a=wt(a);for(o=0;o<a.length;o++)u=a[o],u.col=s,f.push(u)}return f}function $(e,t,n){t=t.clone().stripZone(),n=n.clone().stripZone();var r=[],i,s=e.length,o,u,a,f,l,c,h;for(i=0;i<s;i++)o=e[i],u=o.start.clone().stripZone(),a=z(o).stripZone(),a>t&&u<n&&(u<t?(f=t.clone(),c=!1):(f=u,c=!0),a>n?(l=n.clone(),h=!1):(l=a,h=!0),r.push({event:o,start:f,end:l,isStart:c,isEnd:h}));return r.sort(At)}function J(t,n){var s,o=t.length,u,a,f,c,p,m,g,y,b,w,E="",S,T,N,L,A,M=l(),_=r("isRTL");for(s=0;s<o;s++)u=t[s],a=u.event,f=h(u.start,u.start),c=h(u.end,u.start),p=d(u.col),m=v(u.col),g=m-p,m-=g*.025,g=m-p,y=g*(u.forwardCoord-u.backwardCoord),r("slotEventOverlap")&&(y=Math.max((y-10)*2,y)),_?(w=m-u.backwardCoord*g,b=w-y):(b=p+u.backwardCoord*g,w=b+y),b=Math.max(b,p),w=Math.min(w,m),y=w-b,u.top=f,u.left=b,u.outerWidth=y,u.outerHeight=c-f,E+=K(a,u);M[0].innerHTML=E,S=M.children();for(s=0;s<o;s++)u=t[s],a=u.event,T=e(S[s]),N=i("eventRender",a,a,T),N===!1?T.remove():(N&&N!==!0&&(T.remove(),T=e(N).css({position:"absolute",top:u.top,left:u.left}).appendTo(M)),u.element=T,a._id===n?Q(a,T,u):T[0]._fci=s,k(a,T));x(M,t,Q);for(s=0;s<o;s++){u=t[s];if(T=u.element)u.vsides=O(T,!0),u.hsides=C(T,!0),L=T.find(".fc-event-title"),L.length&&(u.contentTop=L[0].offsetTop)}for(s=0;s<o;s++){u=t[s];if(T=u.element)T[0].style.width=Math.max(0,u.outerWidth-u.hsides)+"px",A=Math.max(0,u.outerHeight-u.vsides),T[0].style.height=A+"px",a=u.event,u.contentTop!==undefined&&A-u.contentTop<10&&(T.find("div.fc-event-time").text(q(a.start,r("timeFormat"))+" - "+a.title),T.find("div.fc-event-title").remove()),i("eventAfterRender",a,a,T)}}function K(e,t){var n="<",i=e.url,u=U(e,r),a=["fc-event","fc-event-vert"];return s(e)&&a.push("fc-event-draggable"),t.isStart&&a.push("fc-event-start"),t.isEnd&&a.push("fc-event-end"),a=a.concat(e.className),e.source&&(a=a.concat(e.source.className||[])),i?n+="a href='"+F(e.url)+"'":n+="div",n+=" class='"+a.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+t.top+"px;"+"left:"+t.left+"px;"+u+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>",e.end?n+=F(R(e.start,e.end,r("timeFormat"))):n+=F(q(e.start,r("timeFormat"))),n+="</div><div class='fc-event-title'>"+F(e.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",t.isEnd&&o(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(i?"a":"div")+">",n}function Q(e,t,n){var r=t.find("div.fc-event-time");s(e)&&Y(e,t,r),n.isEnd&&o(e)&&Z(e,t,r),u(e,t)}function G(e,n,s){function k(){f||(n.width(u).height("").draggable("option","grid",null),f=!0)}var o=s.isStart,u,a,f=!0,l,h=c(),p=y(),d=B(),v=S(),g=E(),x=w(),C=b();n.draggable({opacity:r("dragOpacity","month"),revertDuration:r("dragRevertDuration"),start:function(t,r){i("eventDragStart",n,e,t,r),A(e,n),u=n.width(),h.start(function(t,r){P();if(t){a=!1;var i=m(0,r.col),s=m(0,t.col);l=s.diff(i,"days"),t.row?o?f&&(n.width(p-10),N(n,I.defaultTimedEventDuration/v*g),n.draggable("option","grid",[p,1]),f=!1):a=!0:(D(e.start.clone().add("days",l),z(e).add("days",l)),k()),a=a||f&&!l}else k(),a=!0;n.draggable("option","revert",a)},t,"drag")},stop:function(r,s){h.stop(),P(),i("eventDragStop",n,e,r,s);if(a)k(),n.css("filter",""),L(e,n);else{var o=e.start.clone().add("days",l),u,c;f||(c=Math.round((n.offset().top-T().offset().top)/C),u=t.duration(d+c*x),o=I.rezoneDate(o.clone().time(u))),M(this,e,o,r,s)}}})}function Y(e,t,s){function H(){P(),d&&(E?(s.hide(),t.draggable("option","grid",null),D(O,_)):(B(),s.css("display",""),t.draggable("option","grid",[a,f])))}function B(){var t;O&&(e.end?t=R(O,_,r("timeFormat")):t=q(O,r("timeFormat")),s.text(t))}var o=n.getCoordinateGrid(),u=g(),a=y(),f=b(),l=w(),c,h,d,v,E,S,x,T,N,C,k,O,_;t.draggable({scroll:!1,grid:[a,f],axis:u==1?"y":!1,opacity:r("dragOpacity"),revertDuration:r("dragRevertDuration"),start:function(n,r){i("eventDragStart",t,e,n,r),A(e,t),o.build(),c=t.position(),h=o.cell(n.pageX,n.pageY),d=v=!0,E=S=p(h),x=T=0,N=0,C=k=0,O=null,_=null},drag:function(n,r){var i=o.cell(n.pageX,n.pageY);d=!!i;if(d){E=p(i),x=Math.round((r.position.left-c.left)/a);if(x!=T){var s=m(0,h.col),g=h.col+x;g=Math.max(0,g),g=Math.min(u-1,g);var y=m(0,g);N=y.diff(s,"days")}E||(C=Math.round((r.position.top-c.top)/f))}if(d!=v||E!=S||x!=T||C!=k)E?(O=e.start.clone().stripTime().add("days",N),_=O.clone().add(I.defaultAllDayEventDuration)):(O=e.start.clone().add(C*l).add("days",N),_=z(e).add(C*l).add("days",N)),H(),v=d,S=E,T=x,k=C;t.draggable("option","revert",!d)},stop:function(n,r){P(),i("eventDragStop",t,e,n,r),d&&(E||N||C)?M(this,e,O,n,r):(d=!0,E=!1,x=0,N=0,C=0,H(),t.css("filter",""),t.css(c),L(e,t))}})}function Z(e,t,n){var s,o,u=b(),a=w(),f;t.resizable({handles:{s:".ui-resizable-handle"},grid:u,start:function(n,r){s=o=0,A(e,t),i("eventResizeStart",this,e,n,r)},resize:function(i,l){s=Math.round((Math.max(u,t.height())-l.originalSize.height)/u);if(s!=o){f=z(e).add(a*s);var c;s||e.end?c=R(e.start,f,r("timeFormat")):c=q(e.start,r("timeFormat")),n.text(c),o=s}},stop:function(n,r){i("eventResizeStop",this,e,n,r),s?_(this,e,f,n,r):L(e,t)}})}var n=this;n.renderEvents=W,n.clearEvents=X,n.slotSegHtml=K,Mt.call(n);var r=n.opt,i=n.trigger,s=n.isEventDraggable,o=n.isEventResizable,u=n.eventElementHandlers,a=n.setHeight,f=n.getDaySegmentContainer,l=n.getSlotSegmentContainer,c=n.getHoverListener,h=n.computeDateTop,p=n.getIsCellAllDay,d=n.colContentLeft,v=n.colContentRight,m=n.cellToDate,g=n.getColCnt,y=n.getColWidth,b=n.getSnapHeight,w=n.getSnapDuration,E=n.getSlotHeight,S=n.getSlotDuration,T=n.getSlotContainer,k=n.reportEventElement,L=n.showEvents,A=n.hideEvents,M=n.eventDrop,_=n.eventResize,D=n.renderDayOverlay,P=n.clearOverlays,H=n.renderDayEvents,B=n.getMinTime,j=n.getMaxTime,I=n.calendar,q=I.formatDate,R=I.formatRange,z=I.getEventEnd;n.draggableDayEvent=G}function wt(e){var t=Et(e),n=t[0],r;St(t);if(n){for(r=0;r<n.length;r++)xt(n[r]);for(r=0;r<n.length;r++)Tt(n[r],0,0)}return Nt(t)}function Et(e){var t=[],n,r,i;for(n=0;n<e.length;n++){r=e[n];for(i=0;i<t.length;i++)if(!Ct(r,t[i]).length)break;(t[i]||(t[i]=[])).push(r)}return t}function St(e){var t,n,r,i,s;for(t=0;t<e.length;t++){n=e[t];for(r=0;r<n.length;r++){i=n[r],i.forwardSegs=[];for(s=t+1;s<e.length;s++)Ct(i,e[s],i.forwardSegs)}}}function xt(e){var t=e.forwardSegs,n=0,r,i;if(e.forwardPressure===undefined){for(r=0;r<t.length;r++)i=t[r],xt(i),n=Math.max(n,1+i.forwardPressure);e.forwardPressure=n}}function Tt(e,t,n){var r=e.forwardSegs,i;if(e.forwardCoord===undefined){r.length?(r.sort(Lt),Tt(r[0],t+1,n),e.forwardCoord=r[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(t+1);for(i=0;i<r.length;i++)Tt(r[i],0,e.forwardCoord)}}function Nt(e){var t=[],n,r,i;for(n=0;n<e.length;n++){r=e[n];for(i=0;i<r.length;i++)t.push(r[i])}return t}function Ct(e,t,n){n=n||[];for(var r=0;r<t.length;r++)kt(e,t[r])&&n.push(t[r]);return n}function kt(e,t){return e.end>t.start&&e.start<t.end}function Lt(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||At(e,t)}function At(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function Ot(n,r,i){function h(t,n){var r=f[t];return e.isPlainObject(r)&&!c(t)?j(r,n||i):r}function p(e,t){return r.trigger.apply(r,[e,t||s].concat(Array.prototype.slice.call(arguments,2),[s]))}function d(e){var t=e.source||{};return W(e.startEditable,t.startEditable,h("eventStartEditable"),e.editable,t.editable,h("editable"))}function v(e){var t=e.source||{};return W(e.durationEditable,t.durationEditable,h("eventDurationEditable"),e.editable,t.editable,h("editable"))}function m(){u={},a=[]}function g(e,t){a.push({event:e,element:t}),u[e._id]?u[e._id].push(t):u[e._id]=[t]}function y(){e.each(a,function(e,t){s.trigger("eventDestroy",t.event,t.event,t.element)})}function b(e,t){t.click(function(n){if(!t.hasClass("ui-draggable-dragging")&&!t.hasClass("ui-resizable-resizing"))return p("eventClick",this,e,n)}).hover(function(t){p("eventMouseover",this,e,t)},function(t){p("eventMouseout",this,e,t)})}function w(e,t){S(e,t,"show")}function E(e,t){S(e,t,"hide")}function S(e,t,n){var r=u[e._id],i,s=r.length;for(i=0;i<s;i++)(!t||r[i][0]!=t[0])&&r[i][n]()}function x(e,t,n,i,s){var u=r.mutateEvent(t,n,null);p("eventDrop",e,t,function(){u(),o(t._id)},i,s),o(t._id)}function T(e,t,n,i,s){var u=r.mutateEvent(t,null,n);p("eventResize",e,t,function(){u(),o(t._id)},i,s),o(t._id)}function M(e){return t.isMoment(e)&&(e=e.day()),C[e]}function _(){return k}function D(e,t,n){var r=e.clone();t=t||1;while(C[(r.day()+(n?t:0)+7)%7])r.add("days",t);return r}function P(){var e=H.apply(null,arguments),t=B(e),n=F(t);return n}function H(e,t){var n=s.getColCnt(),r=O?-1:1,i=O?n-1:0;typeof e=="object"&&(t=e.col,e=e.row);var o=e*n+(t*r+i);return o}function B(e){var t=s.start.day();return e+=L[t],Math.floor(e/k)*7+A[(e%k+k)%k]-t}function F(e){return s.start.clone().add("days",e)}function I(e){var t=q(e),n=R(t),r=U(n);return r}function q(e){return e.clone().stripTime().diff(s.start,"days")}function R(e){var t=s.start.day();return e+=t,Math.floor(e/7)*k+L[(e%7+7)%7]-L[t]}function U(e){var t=s.getColCnt(),n=O?-1:1,r=O?t-1:0,i=Math.floor(e/t),o=(e%t+t)%t*n+r;return{row:i,col:o}}function z(e,t){var n=s.getRowCnt(),r=s.getColCnt(),i=[],o=q(e),u=q(t),a=+t.time();a&&a>=l&&u++,u=Math.max(u,o+1);var f=R(o),c=R(u)-1;for(var h=0;h<n;h++){var p=h*r,d=p+r-1,v=Math.max(f,p),m=Math.min(c,d);if(v<=m){var g=U(v),y=U(m),b=[g.col,y.col].sort(),w=B(v)==o,E=B(m)+1==u;i.push({row:h,leftCol:b[0],rightCol:b[1],isStart:w,isEnd:E})}}return i}var s=this;s.element=n,s.calendar=r,s.name=i,s.opt=h,s.trigger=p,s.isEventDraggable=d,s.isEventResizable=v,s.clearEventData=m,s.reportEventElement=g,s.triggerEventDestroy=y,s.eventElementHandlers=b,s.showEvents=w,s.hideEvents=E,s.eventDrop=x,s.eventResize=T;var o=r.reportEventChange,u={},a=[],f=r.options,l=t.duration(f.nextDayThreshold);s.isHiddenDay=M,s.skipHiddenDays=D,s.getCellsPerWeek=_,s.dateToCell=I,s.dateToDayOffset=q,s.dayOffsetToCellOffset=R,s.cellOffsetToCell=U,s.cellToDate=P,s.cellToCellOffset=H,s.cellOffsetToDayOffset=B,s.dayOffsetToDate=F,s.rangeToSegments=z;var N=h("hiddenDays")||[],C=[],k,L=[],A=[],O=h("isRTL");(function(){h("weekends")===!1&&N.push(0,6);for(var t=0,n=0;t<7;t++)L[t]=n,C[t]=e.inArray(t,N)!=-1,C[t]||(A[n]=t,n++);k=n;if(!k)throw"invalid hiddenDays"})()}function Mt(){function H(e,t){var n=I(e,!1,!0);Dt(n,function(e,t){o(e.event,t)}),et(n,t),Dt(n,function(e,t){r("eventAfterRender",e.event,e.event,t)})}function j(e,t,n){var r=I([e],!0,!1),i=[];return Dt(r,function(e,r){e.row===t&&r.css("top",n),i.push(r[0])}),i}function I(t,n,r){var i=b(),s=n?e("<div/>"):i,o=R(t),u,a;return W(o),u=X(o),s[0].innerHTML=u,a=s.children(),n&&i.append(a),$(o,a),Dt(o,function(e,t){e.hsides=C(t,!0)}),Dt(o,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),Dt(o,function(e,t){e.outerHeight=t.outerHeight(!0)}),J(o,r),o}function R(e){var t=[];for(var n=0;n<e.length;n++){var r=z(e[n]);t.push.apply(t,r)}return t}function z(e){var t=N(e.start,D(e));for(var n=0;n<t.length;n++)t[n].event=e;return t}function W(e){var t=n("isRTL");for(var r=0;r<e.length;r++){var i=e[r],s=(t?i.isEnd:i.isStart)?g:v,o=(t?i.isStart:i.isEnd)?y:m,u=s(i.leftCol),a=o(i.rightCol);i.left=u,i.outerWidth=a-u}}function X(e){var t="";for(var n=0;n<e.length;n++)t+=V(e[n]);return t}function V(e){var t="",r=n("isRTL"),o=e.event,u=o.url,a=["fc-event","fc-event-hori"];i(o)&&a.push("fc-event-draggable"),e.isStart&&a.push("fc-event-start"),e.isEnd&&a.push("fc-event-end"),a=a.concat(o.className),o.source&&(a=a.concat(o.source.className||[]));var f=U(o,n);return u?t+="<a href='"+F(u)+"'":t+="<div",t+=" class='"+a.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+e.left+"px;"+f+"'"+">"+"<div class='fc-event-inner'>",!o.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+F(P(o.start,n("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+F(o.title||"")+"</span>"+"</div>",o.allDay&&e.isEnd&&s(o)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(r?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),t+="</"+(u?"a":"div")+">",t}function $(t,n){for(var i=0;i<t.length;i++){var s=t[i],o=s.event,u=n.eq(i),a=r("eventRender",o,o,u);a===!1?u.remove():(a&&a!==!0&&(a=e(a).css({position:"absolute",left:s.left}),u.replaceWith(a),u=a),s.element=u)}}function J(e,t){var n=K(e),r=Z(),i=[],s;if(t)for(s=0;s<r.length;s++)r[s].height(n[s]);for(s=0;s<r.length;s++)i.push(r[s].position().top);Dt(e,function(e,t){t.css("top",i[e.row]+e.top)})}function K(e){var t=h(),n=p(),r=[],i=Q(e),s;for(var o=0;o<t;o++){var u=i[o],a=[];for(s=0;s<n;s++)a.push(0);for(var f=0;f<u.length;f++){var l=u[f];l.top=B(a.slice(l.leftCol,l.rightCol+1));for(s=l.leftCol;s<=l.rightCol;s++)a[s]=l.top+l.outerHeight}r.push(B(a))}return r}function Q(e){var t=h(),n=[],r,i,s;for(r=0;r<e.length;r++)i=e[r],s=i.row,i.element&&(n[s]?n[s].push(i):n[s]=[i]);for(s=0;s<t;s++)n[s]=G(n[s]||[]);return n}function G(e){var t=[],n=Y(e);for(var r=0;r<n.length;r++)t.push.apply(t,n[r]);return t}function Y(e){e.sort(Pt);var t=[];for(var n=0;n<e.length;n++){var r=e[n];for(var i=0;i<t.length;i++)if(!_t(r,t[i]))break;t[i]?t[i].push(r):t[i]=[r]}return t}function Z(){var e,t=h(),n=[];for(e=0;e<t;e++)n[e]=d(e).find("div.fc-day-content > div");return n}function et(e,t){var n=b();Dt(e,function(e,n,r){var i=e.event;i._id===t?tt(i,n,e):n[0]._fci=r}),x(n,e,tt)}function tt(e,n,r){i(e)&&t.draggableDayEvent(e,n,r),e.allDay&&r.isEnd&&s(e)&&t.resizableDayEvent(e,n,r),u(e,n)}function nt(e,t){var i=T(),s,o;t.draggable({delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(n,u){r("eventDragStart",t,e,n,u),f(e,t),i.start(function(n,r,i,u){t.draggable("option","revert",!n||!i&&!u),E();if(n){var a=k(r),f=k(n);s=f.diff(a,"days"),o=e.start.clone().add("days",s),w(o,D(e).add("days",s))}else s=0},n,"drag")},stop:function(n,u){i.stop(),E(),r("eventDragStop",t,e,n,u),s?l(this,e,o,n,u):(t.css("filter",""),a(e,t))}})}function rt(t,i,s){var o=n("isRTL"),u=o?"w":"e",l=i.find(".ui-resizable-"+u),h=!1;q(i),i.mousedown(function(e){e.preventDefault()}).click(function(e){h&&(e.preventDefault(),e.stopImmediatePropagation())}),l.mousedown(function(n){function y(n){r("eventResizeStop",this,t,n),e("body").css("cursor",""),o.stop(),E(),p&&c(this,t,d,n),setTimeout(function(){h=!1},0)}if(n.which!=1)return;h=!0;var o=T(),l=i.css("top"),p,d,v,m=e.extend({},t),g=M(O(t.start));S(),e("body").css("cursor",u+"-resize").one("mouseup",y),r("eventResizeStart",this,t,n),o.start(function(n,r){if(n){var i=L(r),o=L(n);o=Math.max(o,g),p=A(o)-A(i),d=D(t).add("days",p);if(p){m.end=d;var c=v;v=j(m,s.row,l),v=e(v),v.find("*").css("cursor",u+"-resize"),c&&c.remove(),f(t)}else v&&(a(t),v.remove(),v=null);E(),w(t.start,d)}},n)})}var t=this;t.renderDayEvents=H,t.draggableDayEvent=nt,t.resizableDayEvent=rt;var n=t.opt,r=t.trigger,i=t.isEventDraggable,s=t.isEventResizable,o=t.reportEventElement,u=t.eventElementHandlers,a=t.showEvents,f=t.hideEvents,l=t.eventDrop,c=t.eventResize,h=t.getRowCnt,p=t.getColCnt,d=t.allDayRow,v=t.colLeft,m=t.colRight,g=t.colContentLeft,y=t.colContentRight,b=t.getDaySegmentContainer,w=t.renderDayOverlay,E=t.clearOverlays,S=t.clearSelection,T=t.getHoverListener,N=t.rangeToSegments,k=t.cellToDate,L=t.cellToCellOffset,A=t.cellOffsetToDayOffset,O=t.dateToDayOffset,M=t.dayOffsetToCellOffset,_=t.calendar,D=_.getEventEnd,P=_.formatDate}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.leftCol<=e.rightCol&&r.rightCol>=e.leftCol)return!0}return!1}function Dt(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.element;i&&t(r,i,n)}}function Pt(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function Ht(){function f(e,t){l(),e=n.moment(e),t?t=n.moment(t):t=s(e),o(e,t),c(e,t)}function l(e){a&&(a=!1,u(),i("unselect",null,e))}function c(e,t,n){a=!0,i("select",null,e,t,n)}function h(n){var i=t.cellToDate,s=t.getIsCellAllDay,a=t.getHoverListener(),f=t.reportDayClick;if(n.which==1&&r("selectable")){l(n);var h;a.start(function(e,t){u(),e&&s(e)?(h=[i(t),i(e)].sort(H),o(h[0],h[1].clone().add("days",1))):h=null},n),e(document).one("mouseup",function(e){a.stop(),h&&(+h[0]==+h[1]&&f(h[0],e),c(h[0],h[1].clone().add("days",1),e))})}}var t=this;t.select=f,t.unselect=l,t.reportSelection=c,t.daySelectionMousedown=h;var n=t.calendar,r=t.opt,i=t.trigger,s=t.defaultSelectionEnd,o=t.renderSelection,u=t.clearSelection,a=!1;r("selectable")&&r("unselectAuto")&&e(document).mousedown(function(t){var n=r("unselectCancel");if(n&&e(t.target).parents(n).length)return;l(t)})}function Bt(){function i(t,i){var s=r.shift();return s||(s=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),s[0].parentNode!=i[0]&&s.appendTo(i),n.push(s.css(t).show()),s}function s(){var e;while(e=n.shift())r.push(e.hide().unbind())}var t=this;t.renderOverlay=i,t.clearOverlays=s;var n=[],r=[]}function jt(e){var t=this,n,r;t.build=function(){n=[],r=[],e(n,r)},t.cell=function(e,t){var i=n.length,s=r.length,o,u=-1,a=-1;for(o=0;o<i;o++)if(t>=n[o][0]&&t<n[o][1]){u=o;break}for(o=0;o<s;o++)if(e>=r[o][0]&&e<r[o][1]){a=o;break}return u>=0&&a>=0?{row:u,col:a}:null},t.rect=function(e,t,i,s,o){var u=o.offset();return{top:n[e][0]-u.top,left:r[t][0]-u.left,width:r[s][1]-r[t][0],height:n[i][1]-n[e][0]}}}function Ft(t){function u(e){It(e);var n=t.cell(e.pageX,e.pageY);if(Boolean(n)!==Boolean(o)||n&&(n.row!=o.row||n.col!=o.col))n?(s||(s=n),i(n,s,n.row-s.row,n.col-s.col)):i(n,s),o=n}var n=this,r,i,s,o;n.start=function(n,a,f){i=n,s=o=null,t.build(),u(a),r=f||"mousemove",e(document).bind(r,u)},n.stop=function(){return e(document).unbind(r,u),o}}function It(e){e.pageX===undefined&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function qt(e){function s(t){return n[t]=n[t]||e(t)}var t=this,n={},r={},i={};t.left=function(e){return r[e]=r[e]===undefined?s(e).position().left:r[e]},t.right=function(e){return i[e]=i[e]===undefined?t.left(e)+s(e).width():i[e]},t.clear=function(){n={},r={},i={}}}var n={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:i,day:"dddd"},timeFormat:{"default":r},isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},s={en:{columnFormat:{week:"ddd M/D"}}},o={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},u=e.fullCalendar={version:"2.0.0-beta2"},a=u.views={};e.fn.fullCalendar=function(t){var n=Array.prototype.slice.call(arguments,1),r=this;return this.each(function(i,s){var o=e(s),u=o.data("fullCalendar"),a;typeof t=="string"?u&&e.isFunction(u[t])&&(a=u[t].apply(u,n),i||(r=a),t==="destroy"&&o.removeData("fullCalendar")):u||(u=new h(o,t),o.data("fullCalendar",u),u.render())}),r},u.langs=s,u.datepickerLang=function(t,n,r){var i=s[t];i||(i=s[t]={}),l(i,{isRTL:r.isRTL,weekNumberTitle:r.weekHeader,titleFormat:{month:r.showMonthAfterYear?"YYYY["+r.yearSuffix+"] MMMM":"MMMM YYYY["+r.yearSuffix+"]"},buttonText:{prev:I(r.prevText),next:I(r.nextText),today:I(r.currentText)}}),e.datepicker&&(e.datepicker.regional[n]=e.datepicker.regional[t]=r,e.datepicker.regional.en=e.datepicker.regional[""],e.datepicker.setDefaults(r))},u.lang=function(e,t){var r;t&&(r=s[e],r||(r=s[e]={}),l(r,t||{})),n.lang=e},u.sourceNormalizers=[],u.sourceFetchers=[];var d={dataType:"json",cache:!1},v=1;u.applyAll=z;var w=["sun","mon","tue","wed","thu","fri","sat"],X=/^\s*\d{4}-\d\d$/,V=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;u.moment=function(){return $(arguments)},u.moment.utc=function(){return $(arguments,!0)},u.moment.parseZone=function(){return $(arguments,!0,!0)},J.prototype=y(t.fn),J.prototype.clone=function(){return $([this])},J.prototype.time=function(e){return e==null?t.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}):(delete this._ambigTime,!t.isDuration(e)&&!t.isMoment(e)&&(e=t.duration(e)),this.hours(e.hours()+e.days()*24).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds()))},J.prototype.stripTime=function(){var e=this.toArray();return t.fn.utc.call(this),this._ambigTime=!0,this._ambigZone=!0,this.year(e[0]).month(e[1]).date(e[2]).hours(0).minutes(0).seconds(0).milliseconds(0),this},J.prototype.hasTime=function(){return!this._ambigTime},J.prototype.stripZone=function(){var e=this.toArray();return t.fn.utc.call(this),this._ambigZone=!0,this.year(e[0]).month(e[1]).date(e[2]).hours(e[3]).minutes(e[4]).seconds(e[5]).milliseconds(e[6]),this},J.prototype.hasZone=function(){return!this._ambigZone},J.prototype.zone=function(e){return e!=null&&delete this._ambigZone,t.fn.zone.apply(this,arguments)},J.prototype.local=function(){return delete this._ambigZone,t.fn.local.apply(this,arguments)},J.prototype.utc=function(){return delete this._ambigZone,t.fn.utc.apply(this,arguments)},J.prototype.format=function(){return arguments[0]?Y(this,arguments[0]):this._ambigTime?G(this,"YYYY-MM-DD"):this._ambigZone?G(this,"YYYY-MM-DD[T]HH:mm:ss"):G(this)},J.prototype.toISOString=function(){return this._ambigTime?G(this,"YYYY-MM-DD"):this._ambigZone?G(this,"YYYY-MM-DD[T]HH:mm:ss"):t.fn.toISOString.apply(this,arguments)},J.prototype.isWithin=function(e,t){var n=Q([this,e,t]);return n[0]>=n[1]&&n[0]<n[2]},e.each(["isBefore","isAfter","isSame"],function(e,n){J.prototype[n]=function(e,r){var i=Q([this,e]);return t.fn[n].call(i[0],i[1],r)}});var et={t:function(e){return G(e,"a").charAt(0)},T:function(e){return G(e,"A").charAt(0)}};u.formatRange=nt;var it={Y:"year",M:"month",D:"day",d:"day"},ot={};a.month=ft,a.basicWeek=lt,a.basicDay=ct,f({weekMode:"fixed"}),a.agendaWeek=dt,a.agendaDay=vt,f({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:mt,timeFormat:{agenda:gt},dragOpacity:{agenda:.5},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0})});