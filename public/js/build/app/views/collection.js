define(["app/views/partials/page","app/views/partials/empty"],function(e,t){"use strict";return Backbone.Marionette.CompositeView.extend({collectionEvents:{sync:"hideLoading"},initialize:function(e){return this.filter=e,this.triggerCollection()},triggerCollection:function(){$(this.childViewContainer).html(" "),this.setLoading();var e=this;return e.listenTo(MyApp.vent,"paging:update",function(t){return e.filter.from=t.from,e.filter.to=t.to,delete e.filter.count,e.setLoading(),e.collection.reset(),this.collection.fetch({data:this.filter,error:function(){e.hideLoading(),$("#errorHappened").removeClass("hide")}})}),this.collection.fetch({data:this.filter,error:function(){e.hideLoading(),$("#errorHappened").removeClass("hide")}})},hideLoading:function(){$(".loadingLatch").removeClass("loadingActive"),this.collection.length==0&&this.$el.html((new t).render().el)},setLoading:function(){$(".loadingLatch").addClass("loadingActive")},onRender:function(){this.page=new e({collection:this.pageCollection,filter:this.filter}),$(".pageLatch").html(this.page.render().el)},onClose:function(){$(this.page.el).removeData().unbind()}})});